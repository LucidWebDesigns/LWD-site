

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}</title>
    <link rel="icon" type="image/x-icon" href="../assets/images/bulb.svg" />
    <link rel="stylesheet" href="/assets/css/core.css" />
    <script
      defer
      src="https://identity.netlify.com/v1/netlify-identity-widget.js"
    ></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const navItems = document.querySelectorAll(".nav-item");

        // Function to set the active item based on the current URL
        function setActiveNavItem() {
          const currentPath = window.location.pathname;

          navItems.forEach((item) => {
            const link = item.querySelector("a");
            const linkPath = link.getAttribute("href");

            if (
              linkPath === currentPath ||
              (linkPath === "/" && currentPath === "/")
            ) {
              item.classList.add("active");
            } else {
              item.classList.remove("active");
            }
          });
        }
        // Set the active item on initial load
        setActiveNavItem();
        // Set the active item just before the page unloads
        window.addEventListener("beforeunload", function () {
          navItems.forEach((item) => {
            const link = item.querySelector("a");
            const linkPath = link.getAttribute("href");

            if (
              linkPath === window.location.pathname ||
              (linkPath === "/" && window.location.pathname === "/")
            ) {
              item.classList.add("active");
            } else {
              item.classList.remove("active");
            }
          });
        });

        // Set the active item on click without causing a blink
        navItems.forEach((item) => {
          item.addEventListener("click", function () {
            navItems.forEach((navItem) => navItem.classList.remove("active"));
            this.classList.add("active");
          });
        });
      });
    </script>

    <script>
      // Select all elements you want to add the event listener to
      document.addEventListener("DOMContentLoaded", function () {
        const toggler = document.getElementById("toggler-btn");
        if (toggler) {
          toggler.addEventListener("click", function () {
            if (!toggler.classList.contains("pointer-none")) {
              toggler.classList.add("pointer-none");
              setTimeout(() => {
                toggler.classList.remove("pointer-none");
              }, 750);
            } else {
            }
          });
        } else {
          console.error("Element with id 'nav-toggle' not found.");
        }
      });

      // Loop through the NodeList and attach the event listener to each element
    </script>

    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", (user) => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>

    <!-- START EMAIL JS -->
    <script
      src="https://cdn.emailjs.com/dist/email.min.js"
      type="text/javascript"
    ></script>
    <script type="text/javascript">
      (function () {
        emailjs.init("N3TAcxwX1AH1g6cWO");
        console.log("EmailJS initialized");
      })();
    </script>
    <!-- HANDLER -->
    <script type="text/javascript">
      function sendEmail(event) {
        event.preventDefault();

        emailjs
          .sendForm("service_g2va7ar", "template_u4y9pib", "#cs-form-1750")
          .then(
            function (response) {
              alert("Message sent successfully!");
              document.getElementById("cs-form-1750").reset();
            },
            function (error) {
              alert("Failed to send the message. Please try again.");
            }
          );
      }
    </script>
    <!-- END EMAIL JS -->

    <!-- START CAROSEL -->
    <script>
       document.addEventListener("DOMContentLoaded", function () {
        const carousel = document.querySelector(".articles__list");
        const items = carousel.children;
        const totalItems = items.length;

        // Clone the carousel items
        for (let i = 0; i < totalItems*2; i++) {
          const clone = items[i].cloneNode(true);
          carousel.appendChild(clone);
        }

        // Adjust the speed of the scroll based on the number of items
        const totalWidth = totalItems * (300 + 2 * parseInt(getComputedStyle(items[0]).marginRight)); // Adjust width based on item size and margin
        carousel.style.width = `${totalWidth}px`;
        const speed = 30 * totalItems / 4;
        carousel.style.animationDuration = `${speed}s`;
      });
    </script>
  </head>
  <body>
<a class="skip" aria-label="skip to main content" href="#main" tabindex="1">Click To Skip To Main Content</a>
        {% include "components/header.html" %}
        <main id="main">
            {{ content | safe }}
        </main>
        {% include "components/footer.html" %}

  <script>
    const observerOptions = {
      root: null, // Use the viewport as the root
      rootMargin: '0px 0px -35% 0px', // Trigger when the element is 20% into the viewport
      threshold: 0 // Trigger as soon as any part of the element is visible
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          if (entry.target.classList.contains('fade-in')) {
            entry.target.classList.add('fade-in-visible');
          } else if (entry.target.classList.contains('slide-in-left')) {
            entry.target.classList.add('slide-in-visible');
          } else if (entry.target.classList.contains('slide-in-right')) {
            entry.target.classList.add('slide-in-visible');
          }
        }
      });
    }, observerOptions);

    // Observe both fade-in and slide-in sections
    document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(section => {
      observer.observe(section);
    });
  </script>
  <script src="../../assets/js/faq.js"></script>
  </body>
</html>
